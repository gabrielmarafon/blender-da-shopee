<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" sizes="16x16"
    href="https://www.blender.org/wp-content/themes/bthree/assets/icons/favicon-16x16.png">
  <title>Blender da Shopee</title>
  <script src="https://cdn.jsdelivr.net/npm/phosphor-icons@1.4.2/src/index.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/phosphor-icons@1.4.2/src/css/icons.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #444;
      color: #eee;
      display: flex;
      height: 100dvh;
      font-family: sans-serif;
    }

    .container {
      display: flex;
      flex: 1;
      flex-direction: column;
      overflow: hidden;
    }

    .toolbar nav {
      background: #161616;
      border-bottom: 1px solid #555;
      height: 32px;
      display: flex;
      align-items: center;
      padding: 0 16px;
    }

    .toolbar nav ul {
      display: flex;
      list-style: none;
      height: 32px;
    }

    .toolbar nav ul li {
      padding: 0 4px;
      height: 100%;
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    .toolbar nav ul li:hover {
      background: #444;
    }

    .tools {
      display: flex;
      border-bottom: 1px solid #555;
      height: 32px;
      align-items: center;
      padding: 0 16px;
    }

    .logo {
      height: 24px;
      margin-left: auto;
    }

    .content {
      display: flex;
      flex: 1;

    }

    .sidebar {
      background: #2e2e2e;
      border-left: 1px solid #555;

      width: 280px;
    }

    #work-container {
      display: flex;
      flex-direction: column;
      flex: 1;
      position: relative;
    }

    #canvas-container {
      display: flex;
      flex-direction: column;
      flex: 1;
      background: #000;
    }

    .display-info {
      border-top: 1px solid #555;
      padding: 2px 16px;
    }

    .layers-section {
      padding: 8px 0;
    }

    .layers-section h3 {
      font-size: 16px;
      padding: 2px 8px;
    }

    .layers-list {
      list-style: none;
      background: #2f2f2f;
    }

    .layers-list li {
      padding: 2px 8px;
      font-size: 14px;
    }

    .layers-list li:nth-child(2n + 1) {
      background: #353535;
    }

    #vertical-tools {
      background: #353535;
      border: 1px solid #555;
      border-radius: 4px;
      position: absolute;
      left: 12px;
      top: 12px;
      height: 300px;
      width: 40px;
      overflow: hidden;
    }

    #vertical-tools button {
      width: 100%;
      aspect-ratio: 1;
      font-size: 1.25rem;
      background: none;
      color: #eee;
      cursor: pointer;
      border: 0;
    }

    #vertical-tools button:hover {
      background: #444;
    }

    #vertical-tools button:active {
      background: #555;
    }
  </style>
  <script src="https://unpkg.com/phosphor-icons"></script>
</head>

<body>
  <div class="container">
    <header class="toolbar">
      <nav>
        <ul>
          <li>File</li>
          <li>Edit</li>
          <li>Render</li>
          <li>Help</li>
        </ul>
        <img class="logo" src="./logo.png" alt="Blender" />
      </nav>
      <div class="tools">

      </div>
    </header>
    <main class="content">
      <div id="work-container">
        <div id="vertical-tools">
          <button id="tool-cursor" onclick="setCurrentTool('cursor')" title="Cursor">
            <i class="ph ph-cursor"></i>
          </button>
          <button id="tool-dot" onclick="setCurrentTool('dot')" title="Adicionar ponto">
            <i class="ph-fill ph-dots-three-outline"></i>
          </button>
          <button id="tool-line" onclick="setCurrentTool('line')" title="Adicionar linha">
            <i class="ph ph-line-segment"></i>
          </button>
        </div>
        <div id="canvas-container">
          <canvas id="blender-canvas" style="background-color: #AAA;"></canvas>
        </div>
        <div class="display-info">
          <div id="coordinates">Coordenadas: (0, 0)</div>
        </div>
      </div>
      <div class="sidebar">
        <div class="layers-section">
          <h3>Camadas</h3>
          <ul class="layers-list">
            <li>
              <i class="ph-fill ph-dots-three-outline"></i>
              Ponto
            </li>
            <li>
              <i class="ph ph-line-segment"></i>
              Linha
            </li>
            <li>
              <i class="ph-fill ph-dots-three-outline"></i>
              Ponto
            </li>
            <li>
              <i class="ph ph-line-segment"></i>
              Linha
            </li>
            <li>
              <i class="ph-fill ph-dots-three-outline"></i>
              Ponto
            </li>
            <li>
              <i class="ph ph-line-segment"></i>
              Linha
            </li>
          </ul>
        </div>
      </div>
    </main>
  </div>
  <script>
    class Rect {
      constructor(type, name, position) {
        this.type = type;
        this.name = name;
        this.position = position;
      }
    }

    const appState = {
      currentTool: 'cursor',
      layers: []
    }


    function setCurrentTool(tool) {
      appState.setCurrentTool = tool;
      const canvasContainer = document.getElementById('canvas-container');
      if (tool === "cursor") {
        canvasContainer.style.cursor = 'inherit';
      } else {
        canvasContainer.style.cursor = 'crosshair';
      }

    }
    const coordinatesDisplay = document.getElementById('coordinates');
    const canvas = document.getElementById("blender-canvas");
    var ctx = canvas.getContext("2d");
    canvas.height = window.innerHeight - 64 - 23;
    canvas.width = window.innerWidth - 280;
    const W = ctx.canvas.width, H = ctx.canvas.height;
    ctx.setTransform(1, 0, 0, 1, 0, 0);
    ctx.clearRect(0, 0, W, H);
    ctx.setTransform(1, 0, 0, -1, W / 2, H / 2);

    // ctx.setTransform(2, 0, 0, 2, W / 2, H / 2); // zooms in by 2 with origin at center
    // ctx.setTransform(0.5, 0, 0, 0.5, W / 2, H / 2); // zooms out by 2 with origin at center

    function getMousePos(evt) {
      const rect = canvas.getBoundingClientRect();
      const x = evt.clientX - rect.left - W / 2;
      const y = - (evt.clientY - rect.top - H / 2)
      return { x: x, y: y };
    }
    canvas.addEventListener('mousemove', (event) => {
      const { x, y } = getMousePos(event);
      coordinatesDisplay.textContent = `Coordenadas: (${x}, ${y})`;
    });
    addEventListener("resize", () => {
      canvas.height = window.innerHeight - 64 - 23;
      canvas.width = window.innerWidth - 280
    })
    const layers = [
      new Rect("dot", "Ponto 1", [100, 100]),
      new Rect("dot", "Ponto 1", [100, -100]),
      new Rect("dot", "Ponto 1", [0, 0]),
      new Rect("dot", "Ponto 1", [-100, 100]),
      new Rect("dot", "Ponto 1", [-100, -100]),
      new Rect("line", "Ponto 1", [[100, -100], [-100, -100]]),
      new Rect("line", "Ponto 1", [[100, -100], [-100, 100]]),
    ]
    for (const layer of layers) {
      if (layer.type === "dot") {
        ctx.beginPath();
        ctx.arc(layer.position[0], layer.position[1], 3, 0, Math.PI * 2);
        ctx.fillStyle = 'black';
        ctx.fill();
      }
      if (layer.type === "line") {
        ctx.beginPath();
        ctx.moveTo(layer.position[0][0], layer.position[0][1]);
        ctx.lineTo(layer.position[1][0], layer.position[1][1]);
        ctx.strokeStyle = 'black';
        ctx.lineWidth = 2;
        ctx.stroke();
      }
    }
  </script>
</body>

</html>